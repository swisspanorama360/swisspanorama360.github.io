<!DOCTYPE html>
<html>
<head>
	<title>#swisspanorama360 - Panorami a 360 gradi con nomi di vette delle splendide montagne e dei paesaggi svizzeri.</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
	integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
	integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
	<style type="text/css">a {text-decoration: none; }  a:hover {text-decoration: underline; }</style>
</head>

<body style="font-family: Arial, Helvetica, sans-serif;">

<table width="100%" bgcolor="#3f6ae1" cellpadding="0" cellspacing="0"><tbody>
	<tr>
		<td><img src="./various/banner.jpg" alt="swisspanorama360" width="1050" height="32"/></td>
	</tr>
</tbody></table>

<table width="100%"><tbody>
	<tr>
		<td style="text-align:left; padding: 0px;">
			<span style="font-size: larger; font-weight: bold;"><a href="https://swisspanorama360.github.io">#swisspanorama360</a></span>
<!--			<br>
			<span style="font-size: smaller;"><a href="https://swisspanorama360.github.io">https://swisspanorama360.github.io</a></span>-->
		</td>
		<td style="text-align:center; padding: 10px; font-size: smaller;">Panorami a 360 gradi con nomi di vette delle splendide montagne e dei paesaggi svizzeri.</td>
		<td style="text-align:right; padding: 0px; font-size: smaller;"><i><nobr><a href="./index.html">English</a> / <a href="./index_de.html">Deutsch</a> / <a href="./index_fr.html">Fran&ccedil;ais</a> / <span style="background-color: navajowhite; font-weight: bold;"><a href="./index_it.html">Italiano</a></span></nobr></i></td>
	</tr>
</tbody></table>

<table width="100%"><tbody>
	<tr>
		<td style="width: 100%; text-align:left; padding: 0px;"><div id="mapid" style="height: 600px;"></div></td>
	<tr>
</tbody></table>

<table width="100%" ><tbody>
	<tr>
		<td style="width: 100%; text-align:left; padding: 0px; background-color: Lavender;">

<p>
	<b>Filtra per i nomi dei cime o coordinate:</b>
	<input id="peakNameFilterInput" oninput="updateAll()" style="width: 10%; text-align:left;"/>
	&mdash;
	Filtro per elevazione minima in metri: <input id="peakElevFilterInput" oninput="updateAll()" style="width: 5%; text-align:right;" />
	&mdash;
	Limita a <input id="limitInput" oninput="updateAll()" value="5" style="width: 5%; text-align:right;"/> colpi.
	&mdash;
	<span id="peakCount">...</span> panorami.
</p>
		</td>
	<tr>
</tbody></table>

<table id="myTable" style="width: 100%">
    <colgroup>
       <col span="1" style="width: 20%;">
       <col span="1" style="width: 40%;">
       <col span="1" style="width: 40%;">
    </colgroup>
	<tbody id="panoramaListTable">

	</tbody>
</table>

<hr/>

<table width="100%"><tbody>
	<tr>
		<td style="vertical-align:top; padding: 10px; font-size: smaller; background-color: Lavender;"><b><nobr>A proposito di questo progetto:</nobr></b></td>
		<td style="vertical-align:top; padding: 10px; font-size: smaller;">swisspanorama360 è una raccolta di immagini panoramiche delle montagne e dei paesaggi svizzeri.
         I file di immagine sono in formato JPEG di dimensioni 6283 x 1047 pixel, ciascuno grande da 0,5 a 1,5 MB circa.
         Le immagini sono generate al computer da dati aperti e gratuiti (immagini satellitari, dati di elevazione, nomi di vette).</td>
	</tr>
	<tr>
		<td style="vertical-align:top; padding: 10px; font-size: smaller; background-color: Lavender;"><b>Disclaimer:</b></td>
		<td style="vertical-align:top; padding: 10px; font-size: smaller;">Tutti i panorami sono forniti "così come sono" senza alcuna garanzia. Possono contenere errori ed omissioni.
     La regione del campo vicino è sfocata, gli edifici e gli alberi non vengono mostrati. La posizione dell'osservatore potrebbe essere inaccessibile o pericolosa.</td>
	</tr>
	<tr>
		<td style="vertical-align:top; padding: 10px; font-size: smaller; background-color: Lavender;"><b>Origine dei dati:</b></td>
		<td style="vertical-align:top; padding: 10px; font-size: smaller;">I panorami sono stati creati sulla base di set di dati aperti liberamente disponibili e utilizzabili. Molte grazie a:<br>
      + NASA DEM <a href="http://viewfinderpanoramas.org">viewfinderpanoramas.org</a> mantenuto da Jonathan de Ferranti.<br>
          + Contains modified Copernicus Sentinel data (2018), swisstopo/NPOC, see: <a href="https://www.npoc.ch/en/services/products.html">Swiss NPOC (National Point of Contact) for Satellite Images</a>.<br>
      + <a href="http://gipfelverzeichnis.ch">gipfelverzeichnis.ch</a> da Christian Thöni.<br>
      + <a href="http://en.wikipedia.org">wikipedia.org</a><br>
      + <a href="http://map.geo.admin.ch">map.geo.admin.ch</a><br>
      + <a href="http://openstreetmap.org">openstreetmap.org</a>.<br></td>
	</tr>
	<tr>
		<td style="vertical-align:top; padding: 10px; font-size: smaller; background-color: Lavender;"><b>Precisione:</b></td>
		<td style="vertical-align:top; padding: 10px; font-size: smaller;">I panorami offrono una visione realistica a 360 gradi della media e lunga distanza; tuttavia, non mostrano dettagli a breve distanza, come alberi o edifici.
     La dimensione dei pixel (dalle immagini satellitari) è di 10 metri. Le elevazioni sono accurate di circa +/-20 m.
      Le posizioni dei nomi dei cime possono deviare di diverse centinaia di metri, poiché le posizioni nell'origine dati hanno una precisione di solo 1 km.
      I panorami sono calcolati per un raggio fino a 300 km.
      Utilizzo della proiezione polare WGS84 e ECEF-ENU per evitare l'errore angolare di CH1903 e tenere conto della curvatura terrestre e degli angoli di azimut precisi.</td>
	</tr>
	<tr>
		<td style="vertical-align:top; padding: 10px; font-size: smaller; background-color: Lavender;"><b>Licenza:</b></td>
		<td style="vertical-align:top; padding: 10px; font-size: smaller;">Le immagini panoramiche sono disponibili gratuitamente sotto il <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International license</a>.</td>
	</tr>
	<tr>
		<td style="vertical-align:top; padding: 10px; font-size: smaller; background-color: Lavender;"><b>Alternative:</b></td>
		<td style="vertical-align:top; padding: 10px; font-size: smaller;"><a href="https://www.google.com/intl/de/earth">Google Earth</a>,
       <a href="https://www.peakfinder.org">peakfinder.org</a>,
       <a href="https://www.udeuschle.de/panoramas">Ulrich Deuschle Panoramas</a>,
       <a href="https://map.geo.admin.ch/">map.geo.admin.ch</a> (3D),
       swisstopo app, ...</td>
	</tr>
	<tr>
		<td style="vertical-align:top; padding: 10px; font-size: smaller; background-color: Lavender;"><b>Chi siamo:</b></td>
		<td style="vertical-align:top; padding: 10px; font-size: smaller;">(Avviso legale) Proprietario e creatore dei panorami e di questo sito web: Markus Meier, CH-4462 Rickenbach BL, Svizzera, contatto: mmturgi(at)yahoo.de.</td>
	</tr>
	<tr>
		<td style="vertical-align:top; padding: 10px; font-size: smaller; background-color: Lavender;"><b>Ultimo aggiornamento:</b></td>
		<td style="vertical-align:top; padding: 10px; font-size: smaller;">2021-11-02</td>
	</tr>
	<tr>
		<td style="vertical-align:top; padding: 10px; font-size: smaller; background-color: Lavender;"><b>Tutti i panorami:</b></td>
		<td style="vertical-align:top; padding: 10px; font-size: smaller;">			<a target="_blank" href="acheberg_b._klingnau_n47.5868_e8.2608/index.html">Acheberg b. Klingnau</a>, 
			<a target="_blank" href="aebeni_flue_n46.5078_e7.9539/index.html">Äbeni Flue</a>, 
			<a target="_blank" href="aetschberg_n47.4346_e9.3145/index.html">Ätschberg</a>, 
			<a target="_blank" href="aiguille_d_argentiere_n45.9599_e7.0201/index.html">Aiguille d' Argentière</a>, 
			<a target="_blank" href="thunersee_bei_hilterfingen_n46.7332_e7.6532/index.html">Thunersee bei Hilterfingen</a>.
</td>
	</tr>

</tbody></table>


<script>
var mymap = L.map('mapid').setView([46.77, 8.60], 8);

poi= [
		[47.586778, 8.260842, "Acheberg b. Klingnau", 535, "swisspanorama360_acheberg_b._klingnau_n47.5868_e8.2608.jpg", "Location: elevation=538m/1765ft; coordinates: WGS 84: lat.=47.5868, long.=8.2608; Swiss CH1903+: 2661850/1271000."],
		[46.507787, 7.953922, "Äbeni Flue", 3962, "swisspanorama360_aebeni_flue_n46.5078_e7.9539.jpg", "Location: elevation=3965m/13009ft; coordinates: WGS 84: lat.=46.5078, long.=7.9539; Swiss CH1903+: 2639550/1150850."],
		[47.434628, 9.314455, "Ätschberg", 907, "swisspanorama360_aetschberg_n47.4346_e9.3145.jpg", "Location: elevation=910m/2986ft; coordinates: WGS 84: lat.=47.4346, long.=9.3145; Swiss CH1903+: 2741500/1255450."],
		[45.959898, 7.020088, "Aiguille d' Argentière", 3901, "swisspanorama360_aiguille_d_argentiere_n45.9599_e7.0201.jpg", "Location: elevation=3904m/12808ft; coordinates: WGS 84: lat.=45.9599, long.=7.0201; Swiss CH1903+: 2567550/1089900."],
		[46.733192, 7.653199, "Thunersee bei Hilterfingen", 563, "swisspanorama360_thunersee_bei_hilterfingen_n46.7332_e7.6532.jpg", "Location: elevation=563m/1847ft; coordinates: WGS 84: lat.=46.7332, long.=7.6532; Swiss CH1903+: 2616400/1175800."],

]

url_topo = "https://map.geo.admin.ch/?E=$E$&N=$N$&zoom=6";
url_osm  = "https://www.openstreetmap.org/#map=12/$lat$/$lon$";

var markers = new Array(poi.length);

addTileLayer();

updateAll();


function addTileLayer() {
	L.tileLayer(' https://tile.osm.ch/switzerland/{z}/{x}/{y}.png', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
			'Elevation: ASTER GDEM, EarthEnv-DEM90, CDEM contains information under OGL Canada, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(mymap);
}


function updateAll() {
	updatePanoramasOnMap();
	updatePanoramaListTable();
}


function updatePanoramasOnMap() {
	var input = document.getElementById("peakNameFilterInput").value.toLowerCase();
	var inputTokens = input.split(" ");
	var inputElev = document.getElementById("peakElevFilterInput").value;
	var count = 0;
	for (i = 0; i < poi.length; i++) {
		if (markers[i] != undefined) {
			mymap.removeLayer(markers[i]);
		}
		var name = poi[i][2];
		var elev = poi[i][3];
		var file_name_core = poi[i][4].substring(17, poi[i][4].length - 4);
		if (stringContainsTokens(name + ' ' + file_name_core, inputTokens) && elevRangeOk(elev, inputElev)) {
			var path = "./" + file_name_core + "/index.html";
			var name_elev = name + " (" + elev + "m)"
			var coords = [poi[i][0], poi[i][1]];
			var location_string = poi[i][5]
			m = new L.marker(coords,
				{icon: new L.DivIcon({
					className: 'm1',
					html: '<img style="float: left;"  src="./various/peak.png"/><span style="font-size: medium; color: black; background-color: white; opacity: 1.0"><nobr>' +
					  name + '</nobr></span>'
				})})
				.bindPopup("<b>" + name + "</b> (" + elev + "m) &ndash; " + location_string + "<br>" +
					"<a href='" + path + "' target='_blank'><img src='./tn/" + poi[i][4] + "' alt='" + name + "' width=936 height=156 /></a><br>",
					{minWidth: 936});
			m.addTo(mymap);
			markers[i] = m;
			count += 1;
		}
	}
	document.getElementById("peakCount").textContent = "" + count;
}


function updatePanoramaListTable() {
	var input = document.getElementById("peakNameFilterInput").value.toLowerCase();
	var inputTokens = input.split(" ");

	var inputElev = document.getElementById("peakElevFilterInput").value;

	var limitInput = document.getElementById("limitInput").value.toLowerCase();
	var limit = parseInt(limitInput);
	if (isNaN(limit) || (limit < 0)) {
		limit = 999999999;
	}

	var table = document.getElementById("panoramaListTable");
	table.innerHTML = "";
	var count = 0;
	for (i = 0; i < poi.length; i++) {
		if (count >= limit) {
			break;
		}
		var name = poi[i][2];
		var elev = poi[i][3];
		var file_name_core = poi[i][4].substring(17, poi[i][4].length - 4);
		if (stringContainsTokens(name + ' ' + file_name_core, inputTokens) && elevRangeOk(elev, inputElev)) {
 			var path = "./" + file_name_core + "/index.html";
			var pimg = "./tn/" + poi[i][4];
			var name_elev = name + " (" + elev + "m)"
			var coords = [poi[i][0], poi[i][1]];
			var location_string = poi[i][5]

			var p_ch1903 = location_string.indexOf('CH1903+: ');
			var ch1903_e = location_string.substring(p_ch1903 +  9, p_ch1903 + 16);
			var ch1903_n = location_string.substring(p_ch1903 + 17, p_ch1903 + 26);

			var p_lat = location_string.indexOf('lat.=');
			var lat   = location_string.substring(p_lat +  5, p_lat + 12);
			var p_lon = location_string.indexOf('long.=');
			var lon   = location_string.substring(p_lon +  6, p_lon + 12);

			var row = table.insertRow();

			var cell0 = row.insertCell(0);
			cell0.innerHTML = "<b>" + name + "</b><br><span style='font-size: smaller;'>" + elev + " m<br>"
				+ "<a target='_blank' href='" + url_topo.replace("$E$", ch1903_e).replace("$N$", ch1903_n) + "'>geo.admin.ch</a><br>"
				+ "<a target='_blank' href='" + url_osm.replace("$lon$", lon).replace("$lat$", lat) + "'>OSM</a><br>"
				+ "</span>";
			cell0.style["vertical-align"]="top";

			var cell1 = row.insertCell(1);
			cell1.innerHTML = "<a target='_blank' href='" + path + "'><img src='" + pimg + "' width=956 height=156 /></a>";
			cell1.style["vertical-align"]="top";

			var cell2 = row.insertCell(2);
			location_string = location_string.replace(":", ":<br>"); // only the first ':'
			location_string = location_string.replace(/;/g, ";<br>"); // all ';'
			cell2.innerHTML = "<span style='font-size: smaller;'>" + location_string + "</span>";
			cell2.style["vertical-align"]="top";

			count += 1;
		}
	}
	document.getElementById("peakCount").textContent = "" + count;
}


function stringContainsTokens(aString, tokens) {
	if (tokens == undefined) {
		return true;
	}
	for (j = 0; j < tokens.length; j++) {
		if (!aString.toLowerCase().includes(tokens[j].toLowerCase())) {
			return false;
		}
	}
	return true;
}


function elevRangeOk(elev, inputElev) {
	var ie = parseInt(inputElev);
	if (isNaN(ie)) {
		return true;
	}
	return (parseInt(elev) >= ie);
}
</script>

</body>
</html>